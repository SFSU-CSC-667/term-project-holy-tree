extends layout

block content
  h1= title
  p Welcome to #{title}
  ul#messages
  form
    input#m(autocomplete="off")
    button Send

  script(src="/socket.io/socket.io.js")
  script(src="http://code.jquery.com/jquery-1.11.1.js")
  script.
    var socket = io();
    var playerName = "#{name}";
    debugger;
    $('form').submit( function(){
      socket.emit('chat message', { message: $('#m').val(), name: playerName });
      $('#m').val('');
      return false;
    });

    socket.on('chat message', function(msg){
      $('#messages').append($('<li>').text( msg["name"] + ": " + msg["message"] ));
    });
